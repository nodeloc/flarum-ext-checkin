(()=>{var t={172:(t,e,n)=>{t.exports=n(973)},912:function(t){t.exports=function(){"use strict";var t=6e4,e=36e5,n="millisecond",r="second",a="minute",i="hour",o="day",c="week",s="month",u="quarter",l="year",h="date",f="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},y=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},v={s:y,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),a=n%60;return(e<=0?"+":"-")+y(r,2,"0")+":"+y(a,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),a=e.clone().add(r,s),i=n-a<0,o=e.clone().add(r+(i?-1:1),s);return+(-(r+(n-a)/(i?a-o:o-a))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:s,y:l,w:c,d:o,D:h,h:i,m:a,s:r,ms:n,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g="en",k={};k[g]=p;var b="$isDayjsObject",w=function(t){return t instanceof M||!(!t||!t[b])},x=function t(e,n,r){var a;if(!e)return g;if("string"==typeof e){var i=e.toLowerCase();k[i]&&(a=i),n&&(k[i]=n,a=i);var o=e.split("-");if(!a&&o.length>1)return t(o[0])}else{var c=e.name;k[c]=e,a=c}return!r&&a&&(g=a),a||!r&&g},N=function(t,e){if(w(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new M(n)},_=v;_.l=x,_.i=w,_.w=function(t,e){return N(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var M=function(){function p(t){this.$L=x(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[b]=!0}var y=p.prototype;return y.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(_.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(d);if(r){var a=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.init()},y.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},y.$utils=function(){return _},y.isValid=function(){return!(this.$d.toString()===f)},y.isSame=function(t,e){var n=N(t);return this.startOf(e)<=n&&n<=this.endOf(e)},y.isAfter=function(t,e){return N(t)<this.startOf(e)},y.isBefore=function(t,e){return this.endOf(e)<N(t)},y.$g=function(t,e,n){return _.u(t)?this[e]:this.set(n,t)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(t,e){var n=this,u=!!_.u(e)||e,f=_.p(t),d=function(t,e){var r=_.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return u?r:r.endOf(o)},m=function(t,e){return _.w(n.toDate()[t].apply(n.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},p=this.$W,y=this.$M,v=this.$D,g="set"+(this.$u?"UTC":"");switch(f){case l:return u?d(1,0):d(31,11);case s:return u?d(1,y):d(0,y+1);case c:var k=this.$locale().weekStart||0,b=(p<k?p+7:p)-k;return d(u?v-b:v+(6-b),y);case o:case h:return m(g+"Hours",0);case i:return m(g+"Minutes",1);case a:return m(g+"Seconds",2);case r:return m(g+"Milliseconds",3);default:return this.clone()}},y.endOf=function(t){return this.startOf(t,!1)},y.$set=function(t,e){var c,u=_.p(t),f="set"+(this.$u?"UTC":""),d=(c={},c[o]=f+"Date",c[h]=f+"Date",c[s]=f+"Month",c[l]=f+"FullYear",c[i]=f+"Hours",c[a]=f+"Minutes",c[r]=f+"Seconds",c[n]=f+"Milliseconds",c)[u],m=u===o?this.$D+(e-this.$W):e;if(u===s||u===l){var p=this.clone().set(h,1);p.$d[d](m),p.init(),this.$d=p.set(h,Math.min(this.$D,p.daysInMonth())).$d}else d&&this.$d[d](m);return this.init(),this},y.set=function(t,e){return this.clone().$set(t,e)},y.get=function(t){return this[_.p(t)]()},y.add=function(n,u){var h,f=this;n=Number(n);var d=_.p(u),m=function(t){var e=N(f);return _.w(e.date(e.date()+Math.round(t*n)),f)};if(d===s)return this.set(s,this.$M+n);if(d===l)return this.set(l,this.$y+n);if(d===o)return m(1);if(d===c)return m(7);var p=(h={},h[a]=t,h[i]=e,h[r]=1e3,h)[d]||1,y=this.$d.getTime()+n*p;return _.w(y,this)},y.subtract=function(t,e){return this.add(-1*t,e)},y.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=t||"YYYY-MM-DDTHH:mm:ssZ",a=_.z(this),i=this.$H,o=this.$m,c=this.$M,s=n.weekdays,u=n.months,l=n.meridiem,h=function(t,n,a,i){return t&&(t[n]||t(e,r))||a[n].slice(0,i)},d=function(t){return _.s(i%12||12,t,"0")},p=l||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(m,(function(t,r){return r||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return _.s(e.$y,4,"0");case"M":return c+1;case"MM":return _.s(c+1,2,"0");case"MMM":return h(n.monthsShort,c,u,3);case"MMMM":return h(u,c);case"D":return e.$D;case"DD":return _.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return h(n.weekdaysMin,e.$W,s,2);case"ddd":return h(n.weekdaysShort,e.$W,s,3);case"dddd":return s[e.$W];case"H":return String(i);case"HH":return _.s(i,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return p(i,o,!0);case"A":return p(i,o,!1);case"m":return String(o);case"mm":return _.s(o,2,"0");case"s":return String(e.$s);case"ss":return _.s(e.$s,2,"0");case"SSS":return _.s(e.$ms,3,"0");case"Z":return a}return null}(t)||a.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,h,f){var d,m=this,p=_.p(h),y=N(n),v=(y.utcOffset()-this.utcOffset())*t,g=this-y,k=function(){return _.m(m,y)};switch(p){case l:d=k()/12;break;case s:d=k();break;case u:d=k()/3;break;case c:d=(g-v)/6048e5;break;case o:d=(g-v)/864e5;break;case i:d=g/e;break;case a:d=g/t;break;case r:d=g/1e3;break;default:d=g}return f?d:_.a(d)},y.daysInMonth=function(){return this.endOf(s).$D},y.$locale=function(){return k[this.$L]},y.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=x(t,e,!0);return r&&(n.$L=r),n},y.clone=function(){return _.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},p}(),$=M.prototype;return N.prototype=$,[["$ms",n],["$s",r],["$m",a],["$H",i],["$W",o],["$M",s],["$y",l],["$D",h]].forEach((function(t){$[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),N.extend=function(t,e){return t.$i||(t(e,M,N),t.$i=!0),N},N.locale=x,N.isDayjs=w,N.unix=function(t){return N(1e3*t)},N.en=k[g],N.Ls=k,N.p={},N}()},973:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),o=new C(r||[]);return i._invoke=function(t,e,n){var r=h;return function(a,i){if(r===d)throw new Error("Generator is already running");if(r===m){if("throw"===a)throw i;return L()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=M(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(t,e,n);if("normal"===s.type){if(r=n.done?m:f,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=m,n.method="throw",n.arg=s.arg)}}}(t,n,o),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h="suspendedStart",f="suspendedYield",d="executing",m="completed",p={};function y(){}function v(){}function g(){}var k={};s(k,i,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(D([])));w&&w!==n&&r.call(w,i)&&(k=w);var x=g.prototype=y.prototype=Object.create(k);function N(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(a,i,o,c){var s=l(t[a],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,o,c)}),(function(t){n("throw",t,o,c)})):e.resolve(h).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,c)}))}c(s.arg)}var a;this._invoke=function(t,r){function i(){return new e((function(e,a){n(t,r,e,a)}))}return a=a?a.then(i,i):i()}}function M(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=l(r,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,p;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function $(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach($,this),this.reset(!0)}function D(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:L}}function L(){return{value:e,done:!0}}return v.prototype=g,s(x,"constructor",g),s(g,"constructor",v),v.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},N(_.prototype),s(_.prototype,o,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new _(u(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},N(x),s(x,c,"Generator"),s(x,i,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=D,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return c.type="throw",c.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],c=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{extend:()=>Q});const t=flarum.core.compat["forum/app"];var e=n.n(t);const a=flarum.core.compat["common/Model"];var i=n.n(a);const o=flarum.core.compat["common/models/User"];var c=n.n(o);const s=flarum.core.compat["common/extend"],u=flarum.core.compat["forum/components/IndexPage"];var l=n.n(u);function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function f(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,h(t,e)}flarum.core.compat["components/Button"];const d=flarum.core.compat["common/Component"];var p=n.n(d);const y=flarum.core.compat["common/components/Button"];var v=n.n(y),g=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).stateString="",e}f(n,t);var r=n.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e),this.stateString=this.attrs.state},r.view=function(){var t=this;return"enabled"===this.stateString?m("div",null,m(v(),{icon:"far fa-check-circle",className:"Button CheckinButton CheckinButton--active",id:"checkinButton",onclick:function(e){return t.attrs.callback&&t.attrs.callback(e,!1)}.bind(this),disabled:this.attrs.loading,loading:this.attrs.loading},e().translator.trans("gtdxyz-checkin.forum.common-checkin",{amount:e().forum.attribute("checkinReward")})),m(v(),{icon:"fas fa-random",className:"Button CheckinButton CheckinButton--checked",id:"randomcheckinButton",onclick:function(e){return t.attrs.callback&&t.attrs.callback(e,!0)}.bind(this),disabled:this.attrs.loading,loading:this.attrs.loading},e().translator.trans("gtdxyz-checkin.forum.lucky-checkin"))):m("div",null,m(v(),{icon:"fas fa-check-square",className:"Button CheckedButton CheckinButton--checked",disabled:!0,loading:this.attrs.loading},e().translator.trans("gtdxyz-checkin.forum.checked-days",{count:e().session.user.attribute("checkin_days_count")})))},n}(p());const k=flarum.core.compat["forum/components/HeaderSecondary"];var b=n.n(k);const w=flarum.core.compat["forum/components/NotificationsDropdown"];var x=n.n(w),N=n(912),_=n.n(N);const M=flarum.core.compat["common/components/LoadingIndicator"];var $=n.n(M);const S=flarum.core.compat["common/helpers/icon"];var C=n.n(S);const D=flarum.core.compat["common/app"];var L=n.n(D),O=function(){function t(t,e,n){void 0===n&&(n=null),this.settings=void 0,this.callback=void 0,this.errorCallback=void 0,this.widgetId=void 0,this.type=void 0,this.settings=t,this.callback=e,this.errorCallback=n||function(t){L().alerts.show(t)},this.widgetId=null,this.type=this.settings["fof-recaptcha.type"]}var e=t.prototype;return e.render=function(t){var e=this;this.widgetId=grecaptcha.render(t,{sitekey:this.settings["fof-recaptcha.credentials.site"],theme:Number(this.settings.theme_dark_mode)?"dark":"light",type:this.type,size:"invisible"===this.settings["fof-recaptcha.type"]?"invisible":"normal",callback:this.callback,"error-callback":function(){var t={type:"error",content:L().translator.trans("fof-recaptcha.forum.error")};e.errorCallback(t)}})},e.getResponse=function(){return grecaptcha.getResponse(this.widgetId)},e.execute=function(){return grecaptcha.execute(this.widgetId)},e.reset=function(){return grecaptcha.reset(this.widgetId)},e.isInvisible=function(){return"invisible"===this.type},t}();function Y(t,e,n,r,a,i,o){try{var c=t[i](o),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}var T=n(172),z=n.n(T);const I=function(){function t(t){return function(e){return new Promise((function(n,r){var a=document.createElement(t),i="body",o="src";switch(a.onload=function(){n(e)},a.onerror=function(){r(e)},t){case"script":a.async=!0;break;case"link":a.type="text/css",a.rel="stylesheet",o="href",i="head"}a[o]=e,document[i].appendChild(a)}))}}return{css:t("link"),js:t("script"),img:t("img")}}();var j=function(){var t,n=(t=z().mark((function t(){return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e().recaptchaLoaded){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,I.js("https://www.recaptcha.net/recaptcha/api.js?hl="+e().translator.getLocale()+"&render=explicit");case 4:e().recaptchaLoaded=!0;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){Y(i,r,a,o,c,"next",t)}function c(t){Y(i,r,a,o,c,"throw",t)}o(void 0)}))});return function(){return n.apply(this,arguments)}}(),R=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).state=void 0,e}f(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e)},n.view=function(){return m("div",{className:"Form-group"},m("div",{className:"g-recaptcha"}))},n.oncreate=function(e){var n=this;if(t.prototype.oncreate.call(this,e),j().then((function(){var t=setInterval((function(){window.recaptcha&&(clearInterval(t),n.attrs.state.render(e.dom.querySelector(".g-recaptcha")))}),250)})),"invisible"===this.attrs.state.type){var r=e.dom.querySelector("iframe");r&&(r.tabIndex=-1)}},e}(p()),E=function(t){function n(){for(var n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=t.call.apply(t,[this].concat(a))||this).sitekey=e().forum.attribute("fof-recaptcha.credentials.site"),n.loading=!1,n.theme=e().forum.attribute("theme_dark_mode"),n.type=e().forum.attribute("fof-recaptcha.type"),n.size=e().forum.attribute("fof-recaptcha.type"),n.state=void 0,n.recaptchaState=void 0,n.selectRandom=!1,n}f(n,t);var r=n.prototype;return r.oninit=function(n){var r=this;t.prototype.oninit.call(this,n),this.state=this.attrs.state,e().forum.attribute("fof-recaptcha.configured")&&(this.recaptchaState=new O(e().forum.data.attributes,(function(){r.recaptchaState.isInvisible()&&r.afterCheck(r.selectRandom)}),(function(t){r.loading=!1})))},r.oncreate=function(e){t.prototype.oncreate.call(this,e)},r.getWeekdays=function(){var t,e=_()().day();0===e&&(e=7),t=_()().subtract(e-1,"day");var n=[];n.push(t.format("YYYY-MM-DD"));for(var r=1;r<=7;)n.push(t.add(r,"day").format("YYYY-MM-DD")),r++;return n},r.view=function(){var t=this.state.cache||[],n=e().session.user.attribute("allowCheckin"),r=this.getWeekdays();return m("div",{className:"NotificationList CheckinList"},m("div",{className:"NotificationList-header"},m("h4",{className:"App-titleControl App-titleControl--text"},e().translator.trans("gtdxyz-checkin.forum.reward-text"))),m("div",{className:"NotificationList-content"},m("ul",{className:"NotificationGroup-content"},t.length>0?t.map((function(e,n){var a=parseInt(e.id()||"0"),i=a>0?"checked":"uncheck";return m("li",{className:i+" count-"+t.length,title:i},a>0?m("view",null,m("div",{className:"Notification-content"},m("span",null,_()(e.checkin_time()).format("MM/DD")),m("span",null,_()(e.checkin_time()).format("ddd"))),m("div",{className:"Notification-excerpt"},C()("fas fa-star",{className:"Notification-icon"}))):m("view",null,m("div",{className:"Notification-content"},m("span",null,_()(r[n]).format("MM/DD")),m("span",null,_()(r[n]).format("ddd"))),m("div",{className:"Notification-excerpt"},_()().isAfter(r[n],"day")?C()("fas fa-minus",{className:"Notification-icon"}):C()("far fa-star",{className:"Notification-icon"}))))})):this.state.loading?m($(),{className:"LoadingIndicator--block"}):m("div",{className:"NotificationList-empty"},e().translator.trans("gtdxyz-checkin.forum.empty-text"))),m("div",{className:"subtitle"},e().translator.trans("gtdxyz-checkin.forum.count-text",{count:e().session.user.attribute("checkin_days_count")})," ",m("br",null),1===e().forum.attribute("checkinConstantForce")&&e().translator.trans("gtdxyz-checkin.forum.constant-recent-count-text",{count:e().session.user.attribute("checkin_constant_count")})),m("div",null,n?m(R,{state:this.recaptchaState}):""),m("div",{className:"Form-group"},n?m(g,{state:"enabled",callback:this.check.bind(this),loading:this.loading}):m(g,{state:"disabled",loading:this.loading}))))},r.check=function(t,n){var r;return t.preventDefault(),t.stopPropagation(),e().forum.attribute("fof-recaptcha.configured")&&this.recaptchaState.isInvisible()?(this.selectRandom=n,this.loading=!0,void(null==(r=this.recaptchaState)||r.execute())):this.afterCheck(n)},r.afterCheck=function(t){var n,r=null==(n=this.recaptchaState)?void 0:n.getResponse();t?e().randomcheckinClick(r):e().checkinClick(r)},n}(p()),A=function(t){function n(){return t.apply(this,arguments)||this}f(n,t),n.initAttrs=function(n){n.label=n.label||e().translator.trans("gtdxyz-checkin.forum.checkin"),n.icon=n.icon||"fas fa-calendar-alt",n.menuClassName="forum-checkin",t.initAttrs.call(this,n)};var r=n.prototype;return r.getMenu=function(){return m("div",{className:"Dropdown-menu "+this.attrs.menuClassName,onclick:this.menuClick.bind(this)},this.showing&&m(E,{state:this.attrs.state}))},r.goToRoute=function(){m.route.set(e().route("UserCheckinRoute",{username:e().session.user.username()}))},r.getUnreadCount=function(){return e().session.user.attribute("allowCheckin")?1:0},r.getNewCount=function(){return e().session.user.attribute("allowCheckin")?1:0},n}(x());const P=flarum.core.compat["common/components/Page"];var F=n.n(P),B=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).state=void 0,e.loading=!1,e.recaptchaState=void 0,e.selectRandom=!1,e}f(n,t);var r=n.prototype;return r.oninit=function(n){var r=this;t.prototype.oninit.call(this,n),this.state=this.attrs.state,e().forum.attribute("fof-recaptcha.configured")&&(this.recaptchaState=new O(e().forum.data.attributes,(function(){r.recaptchaState.isInvisible()&&r.afterCheck(r.selectRandom)}),(function(t){r.loading=!1})))},r.getWeekdays=function(){var t,e=_()().day();0===e&&(e=7),t=_()().subtract(e-1,"day");var n=[];n.push(t.format("YYYY-MM-DD"));for(var r=1;r<=7;)n.push(t.add(r,"day").format("YYYY-MM-DD")),r++;return n},r.view=function(){var t=this.state.cache||[];if(e().session.user){var n=e().session.user.attribute("allowCheckin"),r=this.getWeekdays();return m("div",{className:"Checkin-page NotificationList CheckinList"},m("div",{className:"NotificationList-header"},m("h4",{className:"App-titleControl App-titleControl--text"},e().translator.trans("gtdxyz-checkin.forum.checkin"))),m("div",{className:"NotificationList-content"},m("ul",{className:"NotificationGroup-content"},t.length>0?t.map((function(e,n){var a=parseInt(e.id()||"0"),i=a>0?"checked":"uncheck";return m("li",{className:i+" count-"+t.length,title:i},a>0?m("view",null,m("div",{className:"Notification-content"},m("span",null,_()(e.checkin_time()).format("MM/DD")),m("span",null,_()(e.checkin_time()).format("ddd"))),m("div",{className:"Notification-excerpt"},C()("fas fa-star",{className:"Notification-icon"}))):m("view",null,m("div",{className:"Notification-content"},m("span",null,_()(r[n]).format("MM/DD")),m("span",null,_()(r[n]).format("ddd"))),m("div",{className:"Notification-excerpt"},_()().isAfter(r[n],"day")?C()("fas fa-minus",{className:"Notification-icon"}):C()("far fa-star",{className:"Notification-icon"}))))})):this.loading?m($(),{className:"LoadingIndicator--block"}):m("div",{className:"NotificationList-empty"},e().translator.trans("gtdxyz-checkin.forum.empty-text"))),m("div",{className:"subtitle"},e().translator.trans("gtdxyz-checkin.forum.count-text",{count:e().session.user.attribute("checkin_days_count")})," ",m("br",null),1===e().forum.attribute("checkinConstantForce")&&e().translator.trans("gtdxyz-checkin.forum.constant-recent-count-text",{count:e().session.user.attribute("checkin_constant_count")})),m("div",null,n?m(R,{state:this.recaptchaState}):""),m("div",{className:"Form-group"},n?m(g,{state:"enabled",callback:this.check.bind(this)}):m(g,{state:"disabled"}))))}return m("div",null)},r.check=function(t,n){var r;return t.preventDefault(),t.stopPropagation(),e().forum.attribute("fof-recaptcha.configured")&&this.recaptchaState.isInvisible()?(this.selectRandom=n,this.loading=!0,void(null==(r=this.recaptchaState)||r.execute())):this.afterCheck(n)},r.afterCheck=function(t){var n,r=null==(n=this.recaptchaState)?void 0:n.getResponse();t?e().randomcheckinClick(r):e().checkinClick(r)},n}(p()),H=function(t){function n(){return t.apply(this,arguments)||this}f(n,t);var r=n.prototype;return r.oninit=function(n){t.prototype.oninit.call(this,n),e().history.push("UserCheckinRoute",""),e().checkins.load()},r.oncreate=function(n){t.prototype.oncreate.call(this,n),e().setTitle(e().translator.trans("gtdxyz-checkin.forum.checkin"))},r.view=function(){return m("div",null,m(B,{state:e().checkins}))},n}(F());const W=flarum.core.compat["common/components/Modal"];var U=n.n(W),G=function(t){function n(){return t.apply(this,arguments)||this}f(n,t);var r=n.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e)},r.className=function(){return"CheckinModal Modal--small"},r.title=function(){return m("div",{className:"successTitle"},e().translator.trans("gtdxyz-checkin.forum.success"))},r.content=function(){var t=e().session.user.attribute("checkin_days_count"),n=e().session.user.attribute("lastCheckinMoney"),r=e().forum.attribute("checkinSuccessText"),a=e().forum.attribute("checkinSuccessRewardText"),i="",o="CheckinModal hideText",c="CheckinModal hideText";""!==r&&(o="CheckinModal successText");var s={1:["唉~~~~~"],2:["时运不济"],3:["时运不济"],4:["平淡无奇"],5:["平淡无奇"],6:["寻常如故"],7:["寻常如故"],8:["转运亨通"],9:["转运亨通"],10:["幸运降临"],11:["幸运降临"],12:["顺风顺水"],13:["顺风顺水"],14:["福气绵绵"],15:["福气绵绵"],16:["鸿运当头"],17:["鸿运当头"],18:["天时地利人和"]},u=[],l=0;return!0==(void 0!==e().forum.attribute("antoinefr-money.moneyname"))&&""!==a&&(i=(e().forum.attribute("antoinefr-money.moneyname")||"[money]").replace("[money]",n+""),c="checkInResultModal rewardText",n>100?(i+=" , 其中连续签到 7 天额外奖励 100能量  ",l=n-100):l=n,s[l]&&(u=s[l])),m("div",{className:"Modal-body"},m("div",{className:o},r.replace("[days]",t+1+"")),m("div",{className:c},"您今天",u.join(", "),"，",a.replace("[reward]",i)))},n}(U()),J=function(t){function n(){return t.apply(this,arguments)||this}f(n,t);var r=n.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e)},r.className=function(){return"CheckinModal Modal--small"},r.title=function(){return m("div",{className:"failedTitle"},e().translator.trans("gtdxyz-checkin.forum.failed"))},r.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"modalText"},e().translator.trans("gtdxyz-checkin.forum.try-again-later")))},n}(U()),q=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).user_id=i().attribute("user_id"),e.type=i().attribute("type"),e.event_id=i().attribute("event_id"),e.checkin_time=i().attribute("checkin_time",i().transformDate),e.reward_money=i().attribute("reward_money"),e.constant=i().attribute("constant"),e.remark=i().attribute("remark"),e.user=i().hasOne("user"),e}return f(e,t),e}(i()),Z=function(){function t(){this.cache=[],this.loading=void 0,this.loading=!1}return t.prototype.load=function(){var t=this;this.cache&&e().session.user.attribute("checkin_sync")&&_()(e().session.user.attribute("checkin_sync")).isSame(_()().format("YYYY-MM-DD"),"day")||(this.loading=!0,m.redraw(),e().store.find("checkin/history").then((function(n){e().session.user.pushAttributes({checkin_sync:_()().format("YYYY-MM-DD")}),t.cache=n})).catch((function(){})).then((function(){t.loading=!1,m.redraw()})))},t}();const V=flarum.core.compat["common/extenders"],Q=[(new(n.n(V)().Store)).add("checkins",q)];e().initializers.add("gtdxyz-checkin",(function(){e().store.models.UserCheckinHistory=q,e().routes.UserCheckinRoute={path:"/u/:username/checkin/history",component:H},e().checkins=new Z,c().prototype.canCheckin=i().attribute("allowCheckin"),e().checkinClick=function(t){!function(t){var n=e().session.user.attribute("checkin_days_count"),r=e().forum.attribute("checkinReward"),a=e().forum.attribute("checkinSuccessType"),i=e().forum.attribute("checkinSuccessText"),o=e().forum.attribute("checkinSuccessRewardText"),c=void 0!==e().forum.attribute("gtdxyz-money-plus.moneyname"),s="";!0===c&&(s=e().forum.attribute("gtdxyz-money-plus.moneyname")||"MO");var u=e().translator.trans("gtdxyz-checkin.forum.failed")+" "+e().translator.trans("gtdxyz-checkin.forum.try-again-later");e().session.user.save({allowCheckin:!1,checkin_days_count:n+1,checkin_type:"N","g-recaptcha-response":t}).then((function(){if(1===a){var t="";if(""!==i){var u=i.replace("[days]",n+1+"");e().alerts.show({type:"success"},u)}if(!0===c&&""!==o){t=r+s;var l=o.replace("[reward]",t);e().alerts.show({type:"success"},l)}}else 2===a&&e().modal.show(G)})).catch((function(t){var n,r=JSON.parse(t.xhr.response).errors;r.length>0&&(u=null==(n=r[0])?void 0:n.detail),1===a&&e().alerts.show({type:"error"},u),2===a&&e().modal.show(J)}))}(t)},e().randomcheckinClick=function(t){!function(t){var n=e().session.user.attribute("checkin_days_count"),r=e().forum.attribute("checkinReward"),a=e().forum.attribute("checkinSuccessType"),i=e().forum.attribute("checkinSuccessText"),o=e().forum.attribute("checkinSuccessRewardText"),c=void 0!==e().forum.attribute("gtdxyz-money-plus.moneyname"),s="";!0===c&&(s=e().forum.attribute("gtdxyz-money-plus.moneyname")||"MO");var u=e().translator.trans("gtdxyz-checkin.forum.failed")+" "+e().translator.trans("gtdxyz-checkin.forum.try-again-later");e().session.user.save({allowCheckin:!1,checkin_days_count:n+1,checkin_type:"R","g-recaptcha-response":t}).then((function(){if(1===a){var t="";if(""!==i){var u=i.replace("[days]",n+1+"");e().alerts.show({type:"success"},u)}if(!0===c&&""!==o){t=r+s;var l=o.replace("[reward]",t);e().alerts.show({type:"success"},l)}}else 2===a&&e().modal.show(G)})).catch((function(t){var n,r=JSON.parse(t.xhr.response).errors;r.length>0&&(u=null==(n=r[0])?void 0:n.detail),1===a&&e().alerts.show({type:"error"},u),2===a&&e().modal.show(J)}))}(t)},(0,s.extend)(l().prototype,"sidebarItems",(function(t){var e="forum-checkin";1!==app.forum.attribute("checkinPosition")&&null!==app.session.user&&!0===app.forum.attribute("allowCheckin")&&(!0===app.session.user.attribute("allowCheckin")?t.add(e,m(g,{state:"enabled"}),50):t.add(e,m(g,{state:"disabled"}),50))})),(0,s.extend)(b().prototype,"items",(function(t){1===e().forum.attribute("checkinPosition")&&null!==e().session.user&&!0===e().forum.attribute("allowCheckin")&&t.add("checkin",m(A,{state:e().checkins}),20)}))}))})(),module.exports=r})();
//# sourceMappingURL=forum.js.map